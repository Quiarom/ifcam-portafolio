---
import Layout from './Layout.astro';
import type { CollectionEntry } from 'astro:content';

type Props = {
  post: CollectionEntry<'portfolio'>;
};

const { post } = Astro.props;
const { title, description, publishDate, image, client, country, industry, services, author } = post.data;
---

<Layout title={title} description={description}>
  <article class="max-w-4xl mx-auto px-4">
    <div class="mb-8">
      {image && (
        <img
          src={image.src}
          alt={image.alt}
          class="w-full aspect-video object-cover rounded-lg mb-6"
        />
      )}
      <div class="flex flex-wrap items-center gap-2 mb-4 text-sm">
        <span class="px-3 py-1 bg-accent-light/10 dark:bg-accent-dark/10 text-accent-light dark:text-accent-dark rounded-full font-medium">
          {industry}
        </span>
        <span class="text-gray-400">•</span>
        <span class="text-gray-600 dark:text-gray-400">{country}</span>
        <span class="text-gray-400">•</span>
        <time class="text-gray-600 dark:text-gray-400">{publishDate.toLocaleDateString('en-US', {
          year: 'numeric',
          month: 'long',
          day: 'numeric'
        })}</time>
      </div>
      
      <h1 class="text-2xl sm:text-4xl font-bold mb-4">{title}</h1>
      
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg">
        <div>
          <h3 class="font-semibold text-sm text-gray-600 dark:text-gray-400 mb-1">CLIENT</h3>
          <p class="font-medium">{client}</p>
        </div>
        <div>
          <h3 class="font-semibold text-sm text-gray-600 dark:text-gray-400 mb-1">INDUSTRY</h3>
          <p class="font-medium">{industry}</p>
        </div>
        <div>
          <h3 class="font-semibold text-sm text-gray-600 dark:text-gray-400 mb-1">LOCATION</h3>
          <p class="font-medium">{country}</p>
        </div>
      </div>

      <div class="mb-6">
        <h3 class="font-semibold text-sm text-gray-600 dark:text-gray-400 mb-2">SERVICES</h3>
        <div class="flex flex-wrap gap-2">
          {services.map((service) => (
            <a
              href={`/portfolio#${service}`}
              class="inline-block px-3 py-1 text-sm font-medium rounded-full bg-accent-light/10 dark:bg-accent-dark/10 text-accent-light dark:text-accent-dark hover:bg-accent-light/20 dark:hover:bg-accent-dark/20 transition-colors"
            >
              {service}
            </a>
          ))}
        </div>
      </div>
    </div>
    
    <div class="prose dark:prose-invert max-w-none">
      <slot />
    </div>

    <div class="mt-12 pt-8 border-t border-gray-200 dark:border-gray-700">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-sm text-gray-600 dark:text-gray-400">Project by</p>
          <p class="font-semibold">{author}</p>
        </div>
        <div class="flex gap-4">
          <a
            href="/portfolio"
            class="px-4 py-2 bg-accent-light/10 dark:bg-accent-dark/10 text-accent-light dark:text-accent-dark rounded-lg hover:bg-accent-light/20 dark:hover:bg-accent-dark/20 transition-colors"
          >
            ← Back to Portfolio
          </a>
          <a
            href="/blog"
            class="px-4 py-2 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"
          >
            View Blog →
          </a>
        </div>
      </div>
    </div>
  </article>
</Layout>

<style is:global>
  .prose {
    @apply text-gray-900 dark:text-gray-100;
  }
  .prose h1, .prose h2, .prose h3, .prose h4 {
    @apply font-bold mb-4 mt-8;
  }
  .prose h1 { @apply text-2xl sm:text-3xl; }
  .prose h2 { @apply text-xl sm:text-2xl; }
  .prose h3 { @apply text-lg sm:text-xl; }
  .prose p { @apply mb-4; }
  .prose ul, .prose ol { @apply mb-4 ml-4; }
  .prose li { @apply mb-2; }
  .prose code {
    @apply px-1 py-0.5 rounded bg-gray-100 dark:bg-gray-800 text-sm;
  }
  .prose pre {
    @apply p-4 rounded-lg bg-gray-100 dark:bg-gray-800 overflow-x-auto mb-4;
  }
  .prose pre code {
    @apply bg-transparent p-0;
  }
  .prose a {
    @apply text-accent-light dark:text-accent-dark hover:underline;
  }
  .prose img {
    @apply rounded-lg;
  }
</style>